{
  "kind": "build_request",
  "title": "Prepare the game for Google Play Store release (TWA packaging readiness + troubleshooting)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-21",
      "text": "Add Digital Asset Links support by including a static `/.well-known/assetlinks.json` file in the frontend public assets so the deployed PWA can be verified for a Trusted Web Activity (TWA) wrapper.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Yes game ko play store ka do"
        ]
      },
      "acceptanceCriteria": [
        "A new file exists at `frontend/public/.well-known/assetlinks.json`.",
        "The file uses valid Digital Asset Links JSON structure (an array of objects with `relation` and `target`).",
        "The `assetlinks.json` content is clearly marked/documented as requiring the developer’s real Android package name and SHA-256 cert fingerprint before Play Store submission.",
        "When the app is deployed, `https://<domain>/.well-known/assetlinks.json` is accessible and returns the JSON file."
      ]
    },
    {
      "id": "REQ-22",
      "text": "Update `frontend/docs/PLAY_STORE_PUBLISHING.md` to include a complete, copy/paste-ready end-to-end TWA (Bubblewrap) packaging flow for generating a signed release AAB, and add troubleshooting guidance for the known packaging failure message \"Unable to create your app\".",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Yes game ko play store ka do"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/docs/PLAY_STORE_PUBLISHING.md` contains complete Bubblewrap command examples (install, init, build) with placeholders for package name, host URL, and signing info.",
        "The markdown renders correctly (no broken/unclosed code fences) and includes steps for creating a keystore and producing a signed AAB for Play Console upload.",
        "The doc includes a troubleshooting section that explicitly references and addresses the error string: `Unable to create your app` (common causes and what to check).",
        "The doc includes a short checklist verifying the deployed PWA requirements used by TWA: HTTPS, valid manifest URL, icons reachable, and `/.well-known/assetlinks.json` reachable."
      ]
    },
    {
      "id": "REQ-23",
      "text": "Ensure PWA metadata required for Play Store/TWA packaging is internally consistent (manifest + HTML) and document the exact values to use during TWA setup (app name, app id, start_url, manifest URL, and icon URLs).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Yes game ko play store ka do"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/public/manifest.webmanifest` and `frontend/index.html` are consistent for app name/description/theme color and icon references (no mismatched filenames/paths).",
        "The Play Store publishing doc lists the exact current PWA values (App ID `skylance-royale`, manifest path `/manifest.webmanifest`, icon paths under `/assets/generated/...`) so they can be copied into Bubblewrap/Android Studio without guesswork.",
        "All user-facing text added/edited by this change is in English."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, or anything under `frontend/src/components/ui` (compose existing components instead).",
    "Keep the backend as a single Motoko actor; do not introduce additional backend services."
  ],
  "nonGoals": [
    "Actually submitting the app to the Google Play Console on the user’s behalf.",
    "Implementing a CI/CD pipeline that automatically generates and uploads APK/AAB artifacts.",
    "Adding third-party authentication providers beyond Internet Identity."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}